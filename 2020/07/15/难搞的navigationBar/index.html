<!DOCTYPE html>
<html lang="zh-CN">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  <title>é›¶ä»£ç å®ç°å¯¼èˆªæ åˆ‡æ¢å®Œç¾è¿‡æ¸¡ - LivenæŠ€æœ¯åšå®¢</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />
<link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/9.18.1/styles/xcode.min.css" />


<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_fmb4a04yx8h.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_ijqayz9ro8k.css">




<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->


<meta name="generator" content="Hexo 4.2.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>CALL ME LIVEN</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/">
              <i class="iconfont icon-home-fill"></i>
              é¦–é¡µ</a>
          </li>
        
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/archives/">
              <i class="iconfont icon-archive-fill"></i>
              å½’æ¡£</a>
          </li>
        
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/categories/">
              <i class="iconfont icon-category-fill"></i>
              åˆ†ç±»</a>
          </li>
        
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/tags/">
              <i class="iconfont icon-tags-fill"></i>
              æ ‡ç­¾</a>
          </li>
        
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="/about/">
              <i class="iconfont icon-user-fill"></i>
              å…³äº</a>
          </li>
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="view intro-2" id="background" parallax=true
         style="background: url('/img/page/page_cover.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              
                <div class="mt-3 post-meta">
                  <i class="iconfont icon-date-fill" aria-hidden="true"></i>
                  <time datetime="2020-07-15 10:18">
                    2020å¹´7æœˆ15æ—¥ ä¸Šåˆ
                  </time>
                </div>
              

              <div class="mt-1">
                
                  
                  <span class="post-meta mr-2">
                    <i class="iconfont icon-chart"></i>
                    2.7k å­—
                  </span>
                

                
                  
                  <span class="post-meta mr-2">
                      <i class="iconfont icon-clock-fill"></i>
                    
                    
                    33
                     åˆ†é’Ÿ
                  </span>
                

                
              </div>
            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <div class="post-content mx-auto" id="post">
            
            <article class="markdown-body">
              <p><img src="https://i.loli.net/2020/08/12/67jIvD4AeSHs1FC.png" srcset="/img/loading.gif" alt="RWLogo"></p>
<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>UINavigationBaræ˜¯æ¯ä¸ªé¡¹ç›®ä¸å¯é¿å…è¦ä½¿ç”¨çš„æ§ä»¶ï¼Œå¦‚æœæ²¡æœ‰ç‰¹æ®Šçš„è¦æ±‚ï¼Œç›´æ¥å®šä¹‰ç³»ç»Ÿçš„å¯¼èˆªæ å°±å¾ˆç®€å•å®¹æ˜“ï¼Œä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†å¦‚æœå‡ºç°å¯¼èˆªæ é¢œè‰²ä¸åŒçš„è·³è½¬æˆ–è€…æœ‰å¯¼èˆªæ å’Œæ— å¯¼èˆªæ ä¹‹é—´çš„è·³è½¬ ï¼Œå°±ä¼šå˜æˆæˆä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜ï¼Œåœ¨è·³è½¬æˆ–è€…æ»‘åŠ¨è¿”å›çš„è¿‡æ¸¡å¾ˆä¸å‹å¥½ï¼Œä½†åˆæ˜¯å¿…é¡»ä¼˜åŒ–çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>UINavigationBarè®©äººæ„Ÿè§‰æ£˜æ‰‹æ˜¯ç”±äºnavigaitonController.navigationBaræ˜¯ä¸€ä¸ªå…¬ç”¨çš„æ§ä»¶ï¼Œå¹¶ä¸”æœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼Œåªè¦ä¸€å¤„ä¿®æ”¹äº†ï¼Œé‚£ä¹ˆå…¨å±€çš„ViewControlleréƒ½ä¼šå—å½±å“ï¼Œè€Œåœ¨è·³è½¬å’Œæ»‘åŠ¨è¿”å›çš„æ—¶å€™æˆ‘ä»¬æœŸå¾…çœ‹åˆ°æ˜¯ä¸¤ä¸ªä¸åŒçš„navigationBarï¼Œäº’ä¸å½±å“ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´é—®é¢˜çš„å…³é”®æ˜¯<code>è®©æ¯ä¸ªViewControllerçš„navigationBaréƒ½ç‹¬ç«‹ï¼Œäº’ä¸å½±å“</code>ã€‚</p>
<h1 id="NavigationBaråŸºç¡€"><a href="#NavigationBaråŸºç¡€" class="headerlink" title="NavigationBaråŸºç¡€"></a>NavigationBaråŸºç¡€</h1><p>ä»¥ä¸‹æ˜¯navigationBaræ§ä»¶çš„åŸºæœ¬ç»“æ„</p>
<p><img src="https://i.loli.net/2020/07/15/PdcjVaUQt4TfkIM.png" srcset="/img/loading.gif" alt="image-20200715104934861"></p>
<pre><code class="hljs objc">navigationBarå¸¸ç”¨çš„å±æ€§å’Œæ–¹æ³•
<span class="hljs-keyword">@property</span>(<span class="hljs-keyword">nonatomic</span>,<span class="hljs-keyword">assign</span>,<span class="hljs-keyword">getter</span>=isTranslucent) <span class="hljs-built_in">BOOL</span> translucent;
<span class="hljs-keyword">@property</span>(<span class="hljs-keyword">nullable</span>, <span class="hljs-keyword">nonatomic</span>,<span class="hljs-keyword">readonly</span>,<span class="hljs-keyword">strong</span>) <span class="hljs-built_in">UINavigationItem</span> *topItem;
<span class="hljs-keyword">@property</span>(<span class="hljs-keyword">nullable</span>, <span class="hljs-keyword">nonatomic</span>,<span class="hljs-keyword">readonly</span>,<span class="hljs-keyword">strong</span>) <span class="hljs-built_in">UINavigationItem</span> *backItem;
<span class="hljs-keyword">@property</span>(<span class="hljs-keyword">nullable</span>,<span class="hljs-keyword">nonatomic</span>,<span class="hljs-keyword">copy</span>) <span class="hljs-built_in">NSArray</span>&lt;<span class="hljs-built_in">UINavigationItem</span> *&gt; *items;
<span class="hljs-keyword">@property</span>(<span class="hljs-keyword">null_resettable</span>, <span class="hljs-keyword">nonatomic</span>,<span class="hljs-keyword">strong</span>) <span class="hljs-built_in">UIColor</span> *tintColor;
<span class="hljs-keyword">@property</span>(<span class="hljs-keyword">nullable</span>, <span class="hljs-keyword">nonatomic</span>,<span class="hljs-keyword">strong</span>) <span class="hljs-built_in">UIColor</span> *barTintColor;
<span class="hljs-keyword">@property</span>(<span class="hljs-keyword">nullable</span>, <span class="hljs-keyword">nonatomic</span>,<span class="hljs-keyword">strong</span>) <span class="hljs-built_in">UIImage</span> *shadowImage;
<span class="hljs-keyword">@property</span>(<span class="hljs-keyword">nullable</span>,<span class="hljs-keyword">nonatomic</span>,<span class="hljs-keyword">copy</span>) <span class="hljs-built_in">NSDictionary</span>&lt;<span class="hljs-built_in">NSAttributedStringKey</span>, <span class="hljs-keyword">id</span>&gt; *titleTextAttributes;
<span class="hljs-keyword">@property</span>(<span class="hljs-keyword">nullable</span>, <span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">copy</span>) <span class="hljs-built_in">NSDictionary</span>&lt;<span class="hljs-built_in">NSAttributedStringKey</span>, <span class="hljs-keyword">id</span>&gt; *largeTitleTextAttributes;

- (<span class="hljs-keyword">void</span>)setBackgroundImage:(<span class="hljs-keyword">nullable</span> <span class="hljs-built_in">UIImage</span> *)backgroundImage forBarMetrics:(<span class="hljs-built_in">UIBarMetrics</span>)barMetrics;
- (<span class="hljs-keyword">nullable</span> <span class="hljs-built_in">UIImage</span> *)backgroundImageForBarMetrics:(<span class="hljs-built_in">UIBarMetrics</span>)barMetrics;</code></pre>

<p>è‹¹æœå®˜æ–¹æ–‡æ¡£ä¸­å¯¹äºå¦‚ä½•ä½¿ç”¨å¯¼èˆªæ æ§åˆ¶å™¨çš„å¯¼èˆªæ ï¼Œæè¿°å¦‚ä¸‹</p>
<pre><code class="hljs objc">To control a navigation bar when using a navigation controller, the following steps are required:

Create a navigation controller <span class="hljs-keyword">in</span> Interface Builder or <span class="hljs-keyword">in</span> the code.

Configure the appearance of the navigation bar using the navigationBar property on the <span class="hljs-built_in">UINavigationController</span> object.

Control the content of the navigation bar by setting the title and navigationItem properties on each <span class="hljs-built_in">UIViewController</span> you push onto the navigation controllerâ€™s stack.</code></pre>

<p>ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼š</p>
<p>ï¼ˆ1ï¼‰ä½¿ç”¨<code>UINavigationController</code>å¯¹è±¡ä¸­çš„<code>navigationBar</code>å±æ€§é…ç½®<code>å¯¼èˆªæ çš„å¤–è§‚</code></p>
<p>ï¼ˆ2ï¼‰é€šè¿‡è®¾ç½®æ¯ä¸ª<code>UIViewController</code>ä¸Šçš„titleå’Œ<code>navigationItem</code>å±æ€§æ¥æ§åˆ¶<code>å¯¼èˆªæ çš„å†…å®¹</code></p>
<blockquote>
<p>é€šè¿‡ä»¥ä¸Šçš„æè¿°ï¼Œå¯ä»¥çŸ¥é“æ¯ä¸ªViewControlleræ˜¾ç¤ºçš„å¯¼èˆªæ navigationBarçš„å†…å®¹æ˜¯å¯ä»¥å•ç‹¬è®¾ç½®çš„ï¼Œäº’ä¸å¹²æ‰°ï¼Œä½†æ˜¯æ¯ä¸ªViewControllerä¸­å¯¼èˆªæ çš„å¤–è§‚æ ·å¼ï¼Œéƒ½æ˜¯éœ€è¦é€šè¿‡self.navigationController.navigationBarè®¾ç½®ï¼Œè€Œæ¯ä¸ªviewControlleréƒ½å…±ç”¨ä¸€ä¸ªnavigationBarï¼Œåªè¦ä¸€ä¸ªä¿®æ”¹äº†ï¼Œé‚£ä¹ˆå…¶ä»–çš„ViewControllerä¸­å¯¼èˆªæ navigationBarçš„æ ·å¼ä¹Ÿä¼šä¿®æ”¹ã€‚</p>
</blockquote>
<h1 id="æ–¹æ¡ˆè§£æï¼š"><a href="#æ–¹æ¡ˆè§£æï¼š" class="headerlink" title="æ–¹æ¡ˆè§£æï¼š"></a>æ–¹æ¡ˆè§£æï¼š</h1><p><a href="https://github.com/CallLiven/RWNavigationBarTransition" target="_blank" rel="noopener">Demo</a>ä»£ç åŠæ³¨é‡Šéƒ½æ˜¯ä»¥<strong>ç•Œé¢A</strong> PUSH==&gt; <strong>ç•Œé¢B</strong>   å’Œ <strong>ç•Œé¢B</strong> Pop==&gt;<strong>ç•Œé¢A</strong>ä¸ºä¾‹ï¼Œæ­¤å¤„åªåšé‡è¦çš„ä»£ç è§£æï¼Œæ›´ä¸ºè¯¦æƒ…è®²è§£çš„è¯·æŸ¥çœ‹ä»£ç æ³¨é‡Šã€‚</p>
<p>è¿™å¥—æ–¹æ¡ˆæ˜¯å€Ÿé‰´<strong>ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ</strong><a href="https://mp.weixin.qq.com/s/CQ-uUJuX-nlPrM_tHBdbNQ" target="_blank" rel="noopener">iOSç³»ç»Ÿä¸­å¯¼èˆªæ çš„è½¬åœºè§£å†³æ–¹æ¡ˆä¸æœ€ä½³å®è·µ </a>æ–‡ç« ï¼Œåœ¨è¿™é‡Œååˆ†æ„Ÿè°¢ã€‚</p>
<p>æ•´å¥—æ–¹æ¡ˆæ ¸å¿ƒçš„ç‚¹æ˜¯ï¼š</p>
<ul>
<li><p>â€œéšè—â€<code>navigationController.navigationBar</code>ï¼Œåœ¨Aç•Œé¢å’ŒBç•Œé¢æ·»åŠ è¿‡æ¸¡çš„å¯¼èˆªæ <code>rw_transitionNavigationBar</code>ï¼›</p>
</li>
<li><p><code>navigationController.navigationBar</code>çš„â€™â€™éšè—â€™â€™æ–¹å¼å…³é”®æ˜¯å°†_UIBarBackgroundçš„é€æ˜åº¦è®¾ç½®ä¸º0ï¼Œè¿™æ ·è®¾ç½®çš„åŸå› æ˜¯ï¼šæ—¢èƒ½éšè—å¯¼èˆªæ æ ·å¼ï¼Œåˆèƒ½ä¸å½±å“ViewControllerçš„å¸ƒå±€</p>
</li>
<li><p>å¯¼èˆªæ æ ·å¼çš„è®¾ç½®æœ€å¥½æ˜¯åœ¨<code>viewDidload</code> æˆ–è€… <code>viewWillAppeard</code>æ–¹æ³•ä¸­è®¾ç½®ï¼Œè¿™æ˜¯å› ä¸ºåˆ›å»ºè¿‡æ¸¡å¯¼èˆªæ <code>rw_transitionNavigationBar</code>æ ·å¼æ˜¯åœ¨<code>viewWillLayoutSubviews</code>ä¸­æ‰§è¡Œçš„ï¼Œä¹Ÿå°±è¯´åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è·å–navigationController.navigationBarçš„æ ·å¼æ¥è®¾ç½®<code>rw_transitionNavigationBar</code></p>
</li>
<li><p>ä¸€å®šä¸€å®šä¸€å®šğŸ™…â€â™‚ï¸ä¸è¦æ‰‹åŠ¨è®¾ç½®navigationBar.translucentçš„å€¼ï¼Œå³ä½¿æ˜¯è®¾ç½®ä¸ºé»˜è®¤çš„YESï¼Œä¹Ÿä¸è¦ï¼Œå…·ä½“ä¸ºä»€ä¹ˆè¯·çœ‹Demoä»£ç </p>
</li>
</ul>
<img src="https://i.loli.net/2020/08/12/qDLMaQezjVSmcn4.png" srcset="/img/loading.gif" alt="image-20200812100443886" style="zoom:50%;" />



<h1 id="ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š"><a href="#ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š"></a><strong>ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š</strong></h1><ul>
<li>éå¸¸ä¸å»ºè®®ä¿®æ”¹é»˜è®¤çš„navigationBar.translucentï¼Œå…·ä½“åŸå› è¯·çœ‹Demoä»£ç ï¼Œéƒ½æœ‰è¯¦æƒ…å¤‡æ³¨</li>
<li>å¯¼èˆªæ èƒŒæ™¯é¢œè‰²å¿…é¡»ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼š[self.navigationController.navigationBar setBackgroundImage:[UIImage imageWithColor:UIColor.yellowColor] forBarMetrics:UIBarMetricsDefault];</li>
<li>ä¸Šé¢çš„æ–¹æ³•èƒ½æ»¡è¶³å¤§éƒ¨åˆ†åœºæ™¯çš„ä½¿ç”¨ï¼Œæ˜¯æ²¡é—®é¢˜çš„ã€‚ä¸è¿‡æœ‰æ—¶ä¼šå‘ç°åœ¨viewcontrollerä¸­è®¾ç½®navigationbarçš„æ ·å¼ä¸èµ·ä½œç”¨äº†ã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ</li>
</ul>
<p>å½“AViewControlleråµŒå¥—è‹¥å¹²ä¸ªBViewControllerï¼Œå¹¶ä¸”å°†åµŒå¥—çš„BVewControlleræ·»åŠ åˆ°AViewControllerçš„ChildViewControllerï¼Œè¿™æ—¶é¡µé¢å¯¼èˆªæ æ˜¾ç¤ºçš„æ ·å¼æœ€ç»ˆç”±BViewControllerä¸­è®¾ç½®çš„å¯¼èˆªæ æ ·å¼å†³å®šã€‚</p>
<p>æ¯”å¦‚ï¼šç±»å‹ä»Šæ—¥å¤´æ¡ä¸­åˆ†æ®µæ§åˆ¶å™¨ä¸­åµŒå¥—å¤šä¸ªViewControllerï¼Œè€Œè¦å®ç°åµŒå¥—çš„ViewControllerçš„Viewç”Ÿå‘½å‘¨æœŸä¹Ÿèµ·ä½œç”¨ï¼Œé‚£ä¹ˆå°±è¦å°†åµŒå¥—çš„ViewControlleræ·»åŠ åˆ°å¤–å±‚çš„ViewControllerçš„ChildViewControllerä¸­    </p>
<h1 id="å¾…è§£å†³é—®é¢˜ï¼š"><a href="#å¾…è§£å†³é—®é¢˜ï¼š" class="headerlink" title="å¾…è§£å†³é—®é¢˜ï¼š"></a>å¾…è§£å†³é—®é¢˜ï¼š</h1><p>å¦‚æœæ˜¯çŠ¶æ€æ éšè—çš„æƒ…å†µï¼Œä¼šå¯¼è‡´çŠ¶æ€æ ä¸Šç§»ï¼ŒåŠviewController.viewä¸Šç§»ï¼ŒæŸ¥é˜…äº†è®¸å¤šæ–‡ç« ï¼Œæ¯”è¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯è·å–çŠ¶æ€æ statusBarå¹¶å°†å…¶é€æ˜åº¦alphaè®¾ç½®ä¸º1ï¼Œè¿™æ ·å³å¯éšè—çŠ¶æ€æ ä¹Ÿä¸ä¼šå½±å“å¸ƒå±€ï¼Œä½†æ˜¯åœ¨iOS13ç³»ç»Ÿä»¥åå·²ç»æ˜¯ä¸èƒ½é€šè¿‡ä»¥ä¸‹çš„ä»£ç è·å–çŠ¶æ€æ ï¼Œå› ä¸ºçŠ¶æ€æ å·²ç»è½¬ä¸ºç”±<code>windowScene.statusBarManager</code>ç®¡ç†ï¼Œè™½ç„¶statusBarManagerè¿™ä¸ªç±»å¹¶æ²¡æœ‰æä¾›å±æ€§æˆ–è€…æ¥å£è·å–åˆ°çŠ¶æ€æ ï¼Œä½†æ˜¯é€šè¿‡Swizzleæ–¹æ³•èƒ½æ‰“å°å…¶å†…éƒ¨ç§æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œè¯¦æƒ…å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs objc"><span class="hljs-comment">/// iOS13ä¹‹å‰</span>
[[[<span class="hljs-built_in">UIApplication</span> sharedApplication] valueForKey:<span class="hljs-string">@"statusBarWindow"</span>] valueForKey:<span class="hljs-string">@"statusBar"</span>];</code></pre>

<blockquote>
<p>statusBarManager æ‰€æœ‰å±æ€§</p>
</blockquote>
<img src="https://i.loli.net/2020/08/11/JPDAUFtuMyCejGV.png" srcset="/img/loading.gif" alt="image-20200811163523396" style="zoom:50%;" />

<blockquote>
<p>statusBarManager æ‰€æœ‰æ–¹æ³•</p>
</blockquote>
<img src="https://i.loli.net/2020/08/11/IdPaSTr8MfN2bZ4.png" srcset="/img/loading.gif" alt="image-20200811163426308" style="zoom:50%;" />

<pre><code class="hljs objc"><span class="hljs-comment">/// iOS 13ä¹‹åè·å–çŠ¶æ€æ </span>
<span class="hljs-built_in">UIView</span> *_statusBar = <span class="hljs-literal">nil</span>;
 <span class="hljs-keyword">if</span> (@available(iOS <span class="hljs-number">13.0</span>,*)) &#123;
     <span class="hljs-built_in">UIStatusBarManager</span> *statusBarManager = [<span class="hljs-built_in">UIApplication</span> sharedApplication].keyWindow.windowScene.statusBarManager;
     <span class="hljs-keyword">if</span> ([statusBarManager respondsToSelector:<span class="hljs-built_in">NSSelectorFromString</span>(<span class="hljs-string">@"createLocalStatusBar"</span>)]) &#123;
            <span class="hljs-built_in">UIView</span> *_localStatusBar = [statusBarManager performSelector:<span class="hljs-built_in">NSSelectorFromString</span>(<span class="hljs-string">@"createLocalStatusBar"</span>)];
            <span class="hljs-keyword">if</span> ([_localStatusBar respondsToSelector:<span class="hljs-built_in">NSSelectorFromString</span>(<span class="hljs-string">@"statusBar"</span>)]) &#123;
                _statusBar = [_localStatusBar performSelector:<span class="hljs-built_in">NSSelectorFromString</span>(<span class="hljs-string">@"statusBar"</span>)];
            &#125;
        &#125;
    &#125;
 <span class="hljs-keyword">else</span>&#123;
     _statusBar = [[[<span class="hljs-built_in">UIApplication</span> sharedApplication] valueForKey:<span class="hljs-string">@"statusBarWindow"</span>] valueForKey:<span class="hljs-string">@"statusBar"</span>];
 &#125;</code></pre>

<p>ä½†æ˜¯è·å–åˆ°çš„statusBarç›´æ¥è®¾ç½®å™¨alphaï¼Œæ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œä¼°è®¡å†…éƒ¨è¿˜æœ‰å…¶ä»–é€»è¾‘æ›´æ–°å…¶é€æ˜åº¦ï¼Œè¿™éƒ¨åˆ†è¿˜æ²¡ææ¸…æ¥šï¼Œæ¥ä¸‹æ¥ä¼šæ¥ç»­ç ”ç©¶ï¼Œå¦‚æœ‰æ›´å¥½çš„è§£å†³æ–¹å¼ï¼Œæ¬¢è¿ç•™è¨€ï¼Œæ„Ÿè°¢</p>
<h1 id="å¾…è§£å†³é—®é¢˜è§£å†³æ–¹æ³•ï¼š"><a href="#å¾…è§£å†³é—®é¢˜è§£å†³æ–¹æ³•ï¼š" class="headerlink" title="å¾…è§£å†³é—®é¢˜è§£å†³æ–¹æ³•ï¼š"></a>å¾…è§£å†³é—®é¢˜è§£å†³æ–¹æ³•ï¼š</h1><p>è§£å†³çš„æ€è·¯è¿˜æ˜¯è·Ÿä¸Šé¢æè¿°çš„æ–¹å¼ä¸€æ ·ï¼Œä¸æ˜¯ç›´æ¥è®¾ç½®éšè—hiddençš„æ–¹å¼å»é™¤çŠ¶æ€æ ï¼Œè€Œæ˜¯é€šè¿‡è®¾ç½®çŠ¶æ€æ çš„é€æ˜åº¦ã€‚iOS13æ ¹æ®ä¸Šé¢çš„æ–¹å¼è·å–åˆ°çŠ¶æ€æ å†è®¾ç½®å…¶é€æ˜åº¦æ˜¯è¡Œä¸é€šçš„ï¼Œè¿™å°±å¾ˆçº³é—·äº†ã€‚ä¸è¡Œé‚£æ€ä¹ˆåŠï¼Œç½‘ä¸Šä¹Ÿæ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•è§£å†³ï¼Œé‚£ä¹ˆæœ‰æ—¶å°±åªèƒ½é çŒœäº†(å…¶å®è‹¹æœå®˜æ–¹è®¾ç½®å±æ€§å’Œæ–¹æ³•åå­—ï¼Œéƒ½æ˜¯æ¯”è¾ƒé€šä¿—æ˜“æ‡‚çš„ï¼ŒçŸ¥å…¶åçŸ¥å…¶æ„)ï¼Œæ ¹æ®æˆ‘ä»¬ä¸Šé¢æ‰“å°StatusBarManagerçš„å±æ€§å’Œæ–¹æ³•ï¼ŒçŸ¥é“æœ‰å‡ ä¸ªå±æ€§å’Œæ–¹æ³•éƒ½æ¶‰åŠåˆ°alphaçš„å€¼ï¼Œæœ€ç»ˆé€šè¿‡ä»¥ä¸‹çš„æ–¹æ³•è§£å†³ï¼Œæš‚æ—¶æœªå‡ºç°BUGã€‚</p>
<blockquote>
<p>ç•™æ„åˆ°StatusBarManageræœ‰ä¸€ä¸ªstatusBarAlphaå±æ€§ï¼Œé‚£ä¹ˆå¿ƒé‡Œä¼šæƒ³æ˜¯ä¸æ˜¯å¯ä»¥ç›´æ¥è®¾ç½®è¿™ä¸ªå±æ€§æ¥æ”¹å˜çŠ¶æ€æ çš„é€æ˜åº¦ï¼Ÿæµ‹è¯•åï¼Œç»“æœæ˜¯ä¸è¡Œçš„ã€‚</p>
<p>ä½†åŒæ—¶ä¹Ÿæ³¨æ„åˆ°æ–¹æ³•åˆ—è¡¨ä¸­æœ‰ä¸€ä¸ª<code>_updateAlpha</code>ï¼Œä¸ºä»€ä¹ˆæ³¨æ„åˆ°å®ƒäº†ï¼Œé™¤äº†å­—é¢çš„æ„æ€å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå°±æ˜¯å®ƒçš„typeCodingæ˜¯<code>B16@0:8</code>ï¼Œè¡¨ç¤ºå®ƒä¼šè¿”å›ä¸€ä¸ªBOOLç±»å‹çš„å€¼ï¼Œå¹¶ä¸”é™¤äº†æ¶ˆæ¯å‘é€çš„åŸºæœ¬å‚æ•°<code>self</code>ã€<code>_cmd</code>å¤–æ²¡æœ‰å¸¦å…¶ä»–çš„å‚æ•°äº†ï¼Œè¿™å¯¹äºæˆ‘ä»¬è¦Swizzleæ˜¯éå¸¸å‹å¥½çš„ã€‚ç»“åˆèµ·æ¥å¯èƒ½å†…éƒ¨çš„é€»è¾‘å°±æ˜¯ï¼šçŠ¶æ€æ çš„é€æ˜æ˜¯å¦æ›´æ–°æ˜¯é€šè¿‡è¿™ä¸ªæ–¹æ³•è¿”å›çš„ä¸ºå‡†ã€‚äº‹å®è¯æ˜ç¡®å®å¯è¡Œ</p>
</blockquote>
<pre><code class="hljs objc"><span class="hljs-comment">/// åˆ›å»ºä¸€ä¸ªUIStatusBarçš„åˆ†ç±»ï¼ŒSwizzleâ€œ_updateAlphaâ€æ–¹æ³•</span>

<span class="hljs-meta">#import <span class="hljs-meta-string">"UIStatusBarManager+RWStatusBarAlpha.h"</span></span>
<span class="hljs-meta">#import <span class="hljs-meta-string">"RWSwizzle.h"</span></span>

<span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">UIStatusBarManager</span> (<span class="hljs-title">RWStatusBarAlpha</span>)</span>

+ (<span class="hljs-keyword">void</span>)load &#123;
    <span class="hljs-keyword">static</span> <span class="hljs-built_in">dispatch_once_t</span> onceToken;
    <span class="hljs-built_in">dispatch_once</span>(&amp;onceToken, ^&#123;
        RWSwizzleMethod([<span class="hljs-keyword">self</span> <span class="hljs-keyword">class</span>], <span class="hljs-built_in">NSSelectorFromString</span>(<span class="hljs-string">@"_updateAlpha"</span>), [<span class="hljs-keyword">self</span> <span class="hljs-keyword">class</span>], <span class="hljs-built_in">NSSelectorFromString</span>(<span class="hljs-string">@"rw_updateAlpha"</span>));
    &#125;);
&#125;

<span class="hljs-comment">/// é€‚é…iOS13ä»¥åçš„çŠ¶æ€æ é€æ˜åº¦ä¿®æ”¹</span>
- (<span class="hljs-built_in">BOOL</span>)rw_updateAlpha &#123;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">YES</span>;
&#125;

<span class="hljs-keyword">@end</span></code></pre>

<p><strong>çŠ¶æ€æ çš„éšè—é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¿®æ”¹ï¼Œè€Œä¸é€šè¿‡prefersStatusBarHiddenè®¾ç½®</strong></p>
<pre><code class="hljs objc"><span class="hljs-comment">/// åˆ›å»ºä¸€ä¸ªViewControllerçš„åˆ†ç±»ï¼Œæ‰©å±•ä¸€ä¸ª"rw_statusBarAlpha"å±æ€§ï¼Œç›´æ¥å¯ä»¥è®¾ç½®çŠ¶æ€æ çš„é€æ˜åº¦</span>
<span class="hljs-comment">/// è¿™é‡Œé€‰æ‹©é€šè¿‡ViewControlleræ·»åŠ åˆ†ç±»çš„æ–¹å¼æ‰©å±•æ­¤åŠŸèƒ½ï¼Œæ˜¯å› ä¸ºä¿®æ”¹çŠ¶æ€æ é€æ˜åº¦ä¹‹åè¿˜éœ€è¦è°ƒç”¨viewControllerçš„setNeedsStatusBarAppearanceUpdateæ–¹æ³•</span>

<span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">UIViewController</span> (<span class="hljs-title">RWStatusBarAlpha</span>)</span>
<span class="hljs-comment">/// çŠ¶æ€æ é€æ˜åº¦ï¼ˆé»˜è®¤å€¼ï¼š1ï¼‰</span>
<span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span>, <span class="hljs-keyword">assign</span>) <span class="hljs-built_in">CGFloat</span>  rw_statusBarAlpha;
<span class="hljs-keyword">@end</span>
  
  
<span class="hljs-meta">#import <span class="hljs-meta-string">"UIViewController+RWStatusBarAlpha.h"</span></span>
<span class="hljs-meta">#import <span class="hljs-meta-string">&lt;objc/runtime.h&gt;</span></span>
<span class="hljs-meta">#import <span class="hljs-meta-string">"RWSwizzle.h"</span></span>

<span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">UIViewController</span> (<span class="hljs-title">RWStatusBarAlpha</span>)</span>

+ (<span class="hljs-keyword">void</span>)load &#123;
    <span class="hljs-keyword">static</span> <span class="hljs-built_in">dispatch_once_t</span> onceToken;
    <span class="hljs-built_in">dispatch_once</span>(&amp;onceToken, ^&#123;
        RWSwizzleMethod([<span class="hljs-keyword">self</span> <span class="hljs-keyword">class</span>],
                        <span class="hljs-keyword">@selector</span>(init),
                        [<span class="hljs-keyword">self</span> <span class="hljs-keyword">class</span>],
                        <span class="hljs-keyword">@selector</span>(rw_init));
    &#125;);
&#125;

- (<span class="hljs-keyword">instancetype</span>)rw_init &#123;
  	<span class="hljs-comment">/// è®¾ç½®å…¶åˆå§‹å€¼ä¸º1</span>
    <span class="hljs-keyword">self</span>.rw_statusBarAlpha = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">return</span> [<span class="hljs-keyword">self</span> rw_init];
&#125;

- (<span class="hljs-built_in">CGFloat</span>)rw_statusBarAlpha &#123;
    <span class="hljs-keyword">return</span> [objc_getAssociatedObject(<span class="hljs-keyword">self</span>, <span class="hljs-keyword">@selector</span>(rw_statusBarAlpha)) floatValue];
&#125;

- (<span class="hljs-keyword">void</span>)setRw_statusBarAlpha:(<span class="hljs-built_in">CGFloat</span>)rw_statusBarAlpha &#123;
    objc_setAssociatedObject(<span class="hljs-keyword">self</span>, <span class="hljs-keyword">@selector</span>(rw_statusBarAlpha), @(rw_statusBarAlpha), OBJC_ASSOCIATION_RETAIN_NONATOMIC);
    <span class="hljs-keyword">if</span> (@available(iOS <span class="hljs-number">13.0</span>,*)) &#123;
        <span class="hljs-built_in">UIStatusBarManager</span> *statusBarManager = [<span class="hljs-built_in">UIApplication</span> sharedApplication].keyWindow.windowScene.statusBarManager;
        [statusBarManager setValue:@(rw_statusBarAlpha) forKey:<span class="hljs-string">@"statusBarAlpha"</span>];
    &#125;
    <span class="hljs-keyword">else</span>&#123;
        <span class="hljs-built_in">UIView</span> *statusBar = [[[<span class="hljs-built_in">UIApplication</span> sharedApplication] valueForKey:<span class="hljs-string">@"statusBarWindow"</span>] valueForKey:<span class="hljs-string">@"statusBar"</span>];
        statusBar.alpha = rw_statusBarAlpha;
    &#125;
    [<span class="hljs-keyword">self</span> setNeedsStatusBarAppearanceUpdate];
&#125;

<span class="hljs-keyword">@end</span></code></pre>





<h1 id="ç–‘æƒ‘è§£å¯†ï¼š"><a href="#ç–‘æƒ‘è§£å¯†ï¼š" class="headerlink" title="ç–‘æƒ‘è§£å¯†ï¼š"></a>ç–‘æƒ‘è§£å¯†ï¼š</h1><p><strong>æ­£ç¡®çš„è®¾ç½®å¯¼èˆªæ æ§åˆ¶ä¸­å¯¼èˆªæ çš„èƒŒæ™¯é¢œè‰²</strong></p>
<p>è¯·æŸ¥é˜…<a href="https://www.jianshu.com/p/6a5552ec5099" target="_blank" rel="noopener">iOS NavigationBar å¯¼èˆªæ èƒŒæ™¯é¢œè‰²è®¾ç½® + iOS11 é€‚é…</a>ä¸€æ–‡ä¸­ï¼Œå…³äºè®¾ç½®navigationBar.tinkColorã€navigationBar.backgroundColorã€navigationBar.BarTinkColorçš„åŒºåˆ«</p>
<p>æ¨èå†™æ³•ï¼ˆè§†è§‰ä¸Šæ˜¯çœ‹ä¸å‡ºæœ‰ä»»ä½•å·®åˆ«çš„ï¼‰</p>
<pre><code class="hljs objc">[<span class="hljs-keyword">self</span>.navigationController.navigationBar setBackgroundImage:[<span class="hljs-built_in">UIImage</span> imageWithColor:<span class="hljs-built_in">UIColor</span>.yellowColor] forBarMetrics:<span class="hljs-built_in">UIBarMetricsDefault</span>];</code></pre>



<h1 id="è¡¥å……ï¼š"><a href="#è¡¥å……ï¼š" class="headerlink" title="è¡¥å……ï¼š"></a>è¡¥å……ï¼š</h1><blockquote>
<p>NavigationController è®¾ç½® RootViewControlleræ—¶ï¼ŒrootViewControlleråˆ›å»ºæ—¶é¿å…è®¾ç½®viewç›¸å…³çš„å±æ€§ï¼Œå¦‚æœè®¾ç½®äº†viewç›¸å…³çš„å±æ€§ï¼Œé‚£ä¹ˆå°±ä¼šæå‰è°ƒç”¨viewControllerçš„viewDidLoadæ–¹æ³•ï¼Œå¯¼è‡´viewControllerè¿˜æ²¡å…¥æ ˆnavigation Stackï¼Œåœ¨viewDidLoadè®¾ç½®å¯¼èˆªæ æ—¶ï¼Œè·å–å¯¼èˆªæ æ§åˆ¶å™¨ä¸ºç©º</p>
</blockquote>
<p><img src="https://i.loli.net/2020/07/15/B68dLgIHOrm7XZl.png" srcset="/img/loading.gif" alt="image-20200715143403667"></p>
<p><img src="https://i.loli.net/2020/07/15/jeFmacJNpuIv3UE.png" srcset="/img/loading.gif" alt="image-20200715143504939"></p>
<h1 id="BUGä¿®å¤è®°å½•ï¼š"><a href="#BUGä¿®å¤è®°å½•ï¼š" class="headerlink" title="BUGä¿®å¤è®°å½•ï¼š"></a>BUGä¿®å¤è®°å½•ï¼š</h1><ul>
<li><h3 id="é—®é¢˜ä¸€"><a href="#é—®é¢˜ä¸€" class="headerlink" title="é—®é¢˜ä¸€"></a>é—®é¢˜ä¸€</h3></li>
</ul>
<blockquote>
<p>åœ¨iphone6 12.4çš„ç³»ç»Ÿä¸Šï¼Œå‡ºç°ä»¥ä¸‹çš„â€œæ–­å±‚â€çš„é—®é¢˜<br><img src="https://i.loli.net/2020/08/12/UVpQamxAOM1JWIR.png" srcset="/img/loading.gif" alt="image-20200812160414246" style="zoom:25%;" /></p>
</blockquote>
<p><strong>BUGåˆ†æå¦‚ä¸‹ï¼š</strong></p>
<p><img src="https://i.loli.net/2020/08/12/ZYyofFmLubQCiOG.png" srcset="/img/loading.gif" alt="image-20200812160915907"></p>
<p><img src="https://i.loli.net/2020/08/12/xJfzgNikSrb13Av.png" srcset="/img/loading.gif" alt="image-20200812160521077"></p>
<pre><code class="hljs objc"><span class="hljs-comment">/// è‡ªå®šä¹‰çš„å¯¼èˆªæ ä»£ç </span>
<span class="hljs-built_in">UINavigationBar</span> *tempBar = [[<span class="hljs-built_in">UINavigationBar</span> alloc]initWithFrame:<span class="hljs-built_in">CGRectMake</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-keyword">self</span>.view.frame.size.width, <span class="hljs-number">64</span>)];
tempBar.backgroundColor = <span class="hljs-built_in">UIColor</span>.blueColor;
[<span class="hljs-keyword">self</span>.view addSubview:tempBar];</code></pre>

<p>ä»ä¸Šé¢çš„navigationBarçš„å±‚çº§æˆªå›¾å¯ä»¥çœ‹å¾—å‡ºæ¥ä¸¤å¼ å›¾çš„ç»“æ„æœ‰æ‰€ä¸åŒï¼Œä¸»è¦ä½“ç°åœ¨è®¾ç½®å¯¼èˆªæ æ ·å¼çš„å±‚çº§_UIBarBackgroundçš„å¤§å°å’Œåæ ‡ï¼ˆè“è‰²ä¸Šä¸€å±‚çš„æ¡†æ¡†å°±æ˜¯ _UIBarBackgroundï¼‰ï¼Œè€Œæˆ‘ä»¬åœ¨è®¾ç½®åˆ›å»ºçš„è¿‡æ¸¡å¯¼èˆªæ çš„å¯¼èˆªæ æ ·å¼ï¼Œæˆ–è€…æ˜¯è¯´è®¾ç½®navigationController.navigationBarçš„ä¹Ÿå¥½ï¼Œéƒ½æ˜¯é€šè¿‡è®¾ç½®backgroundImageå®Œæˆçš„ï¼Œä¹Ÿå°±æ˜¯è®¾ç½® _UIBarBackgroundä¸Šçš„å­è§†å›¾å®Œæˆï¼Œæ‰€ä»¥æ‰ä¼šå‡ºç°iOS12.4æ–­å±‚çš„BUG</p>
<p>ï¼ˆæ¨æµ‹ï¼š</p>
<p>1ã€æ‰‹åŠ¨åˆ›å»ºçš„navigationBarå’Œå¯¼èˆªæ navigationControllerè‡ªå¸¦çš„navigationBaræ˜¯ä¸ä¸€æ ·çš„ï¼ŒnavigationControlleråœ¨åˆ›å»ºnavigationBarçš„æ—¶å€™åº”è¯¥æ˜¯æœ‰å¯¹_UIBarBackgroundçš„frameè¿›è¡Œè®¾ç½®</p>
<p>2ã€æ–°ç‰ˆæœ¬çš„navigationBarä¸­å¯¹_UIBarBackgroundçš„frameé»˜è®¤æ˜¯navigationBar.bounds</p>
<p>ï¼‰</p>
<p>æ€è·¯å°±æ˜¯å°†_UIBarBackgroundçš„å¤§å°è®¾ç½®è·ŸUINavigationBarçš„ä¸€æ ·ï¼Œä»¥ä¸‹æ˜¯ä¸¤ä¸ªå…³é”®å¸¦ä»£ç ç‰‡æ®µ</p>
<pre><code class="hljs objc"><span class="hljs-comment">/// ç¬¬ä¸€</span>
<span class="hljs-comment">/// UIViewController+RWNavigationBarTransition.m æ–‡ä»¶</span>
<span class="hljs-comment">/*</span>
<span class="hljs-comment">	åœ¨è®¾ç½®è¿‡æ¸¡å¯¼èˆªæ rw_transitionNavigationBar.frameçš„æ—¶å€™ï¼Œæ‹¿çš„æ˜¯UIBarBackgroundçš„frame</span>
<span class="hljs-comment">	è¿™æ ·åšçš„ç›®çš„æ˜¯è®©åˆ›å»ºçš„å¯¼èˆªæ rw_transitionNavigationBarçš„é«˜åº¦èƒ½è¦†ç›–åˆ°çŠ¶æ€æ ï¼Œè¿™æ ·ä¾¿äºè®¾ç½®ç¬¬äºŒæ­¥ä¸­çš„UIBarBackgroundçš„é«˜åº¦</span>
<span class="hljs-comment">*/</span>
<span class="hljs-built_in">UIView</span> *backgroundView = <span class="hljs-keyword">self</span>.navigationController.navigationBar.rw_backgroundView;
<span class="hljs-built_in">CGRect</span> rect = [backgroundView.superview convertRect:backgroundView.frame toView:<span class="hljs-keyword">self</span>.view];
<span class="hljs-keyword">self</span>.rw_transitionNavigationBar.frame = rect;</code></pre>

<pre><code class="hljs objc"><span class="hljs-comment">/// ç¬¬äºŒ</span>
<span class="hljs-class"><span class="hljs-keyword">@implementation</span> <span class="hljs-title">UINavigationBar</span> (<span class="hljs-title">RWNavigationBarTransition</span>)</span>

+ (<span class="hljs-keyword">void</span>)load &#123;
    <span class="hljs-keyword">static</span> <span class="hljs-built_in">dispatch_once_t</span> onceToken;
    <span class="hljs-built_in">dispatch_once</span>(&amp;onceToken, ^&#123;
        RWSwizzleMethod([<span class="hljs-keyword">self</span> <span class="hljs-keyword">class</span>],
                        <span class="hljs-keyword">@selector</span>(layoutSubviews),
                        [<span class="hljs-keyword">self</span> <span class="hljs-keyword">class</span>],
                        <span class="hljs-keyword">@selector</span>(rw_layoutSubviews));
    &#125;);
&#125;

- (<span class="hljs-keyword">void</span>)rw_layoutSubviews &#123;
    [<span class="hljs-keyword">self</span> rw_layoutSubviews];
  	<span class="hljs-comment">/// è¿™é‡Œå°±å…¼å®¹äº†ä¸Šé¢æˆªå›¾å‡ºç°çš„ä¸¤ç§æƒ…å†µ</span>
    <span class="hljs-built_in">UIView</span> *backgroundView = <span class="hljs-keyword">self</span>.rw_backgroundView;
    <span class="hljs-built_in">CGRect</span> frame = backgroundView.frame;
    frame.size.height = <span class="hljs-keyword">self</span>.frame.size.height + fabs(frame.origin.y);
    backgroundView.frame = frame;
&#125;

- (<span class="hljs-built_in">UIView</span> *)rw_backgroundView &#123;
    <span class="hljs-comment">/// é€‚é…iOS10ä¹‹å‰åiOS10ä¹‹åçš„</span>
    __block <span class="hljs-built_in">UIView</span> *backgroundView = <span class="hljs-literal">nil</span>;
    [<span class="hljs-keyword">self</span>.subviews enumerateObjectsUsingBlock:^(__kindof <span class="hljs-built_in">UIView</span> * _Nonnull obj, <span class="hljs-built_in">NSUInteger</span> idx, <span class="hljs-built_in">BOOL</span> * _Nonnull stop) &#123;
        <span class="hljs-keyword">if</span> ([obj isKindOfClass:<span class="hljs-built_in">NSClassFromString</span>(<span class="hljs-string">@"_UIBarBackground"</span>)] || [obj isKindOfClass:<span class="hljs-built_in">NSClassFromString</span>(<span class="hljs-string">@"_UINavigationBarBackground"</span>)]) &#123;
            backgroundView = obj;
            *stop = <span class="hljs-literal">YES</span>;
        &#125;
    &#125;];
    <span class="hljs-keyword">return</span> backgroundView;
&#125;

<span class="hljs-keyword">@end</span></code></pre>



<h1 id="å‚è€ƒæ–‡çŒ®ï¼š"><a href="#å‚è€ƒæ–‡çŒ®ï¼š" class="headerlink" title="å‚è€ƒæ–‡çŒ®ï¼š"></a>å‚è€ƒæ–‡çŒ®ï¼š</h1><p><strong>ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ</strong>â€“<a href="https://mp.weixin.qq.com/s/CQ-uUJuX-nlPrM_tHBdbNQ" target="_blank" rel="noopener">iOSç³»ç»Ÿä¸­å¯¼èˆªæ çš„è½¬åœºè§£å†³æ–¹æ¡ˆä¸æœ€ä½³å®è·µ </a>  <a href="https://github.com/MoZhouqi/KMNavigationBarTransition" target="_blank" rel="noopener">githubä»£ç </a></p>

            </article>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Object-C/">Object-C</a>
                    
                      <a class="hover-with-bg" href="/categories/Object-C/iOS/">iOS</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E9%A1%B9%E7%9B%AE%E5%BF%85%E5%A4%87/">é¡¹ç›®å¿…å¤‡</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="nofollow noopener noopener">CC BY-SA 3.0åè®®</a> ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p>
              
              
                <div class="post-prevnext row">
                  <div class="post-prev col-6">
                    
                    
                      <a href="/2020/07/27/Flutter%E5%85%A5%E9%97%A8%E8%B5%84%E6%96%99/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Flutter å…¥é—¨èµ„æ–™</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </div>
                  <div class="post-next col-6">
                    
                    
                      <a href="/2020/07/06/%E5%A5%BD%E6%96%87%E7%BB%86%E5%93%81/">
                        <span class="hidden-mobile">å¥½æ–‡ç»†å“</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </div>
                </div>
              
            </div>

            
              <!-- Comments -->
              <div class="comments" id="comments">
                
                
  <div id="vcomments"></div>
  <script defer src="https://cdn.staticfile.org/valine/1.4.4/Valine.min.js" ></script>

  <script type="text/javascript">
    var oldLoadVa = window.onload;
    window.onload = function () {
      oldLoadVa && oldLoadVa();

      new Valine({
        el: "#vcomments",
        app_id: "yXom8ixvXSnnf5ow9iuwTppi-gzGzoHsz",
        app_key: "Tb7YxoXCUDQsdcJI8M95cAWU",
        placeholder: "è¯´ç‚¹ä»€ä¹ˆ",
        path: window.location.pathname,
        avatar: "retro",
        meta: ["æ˜µç§°"],
        pageSize: "20",
        lang: "zh-CN",
        highlight: false,
        recordIP: false,
        serverURLs: "",
      });
    };
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://valine.js.org" target="_blank" rel="nofollow noopener noopener">comments
      powered by Valine.</a></noscript>


              </div>
            
          </div>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  
    <!-- APlayer éŸ³ä¹æ’­æ”¾å™¨ -->
    <div id="aplayer"></div>
    <script defer src="https://cdn.staticfile.org/aplayer/1.10.1/APlayer.min.js" ></script>
<link  rel="stylesheet" href="https://cdn.staticfile.org/aplayer/1.10.1/APlayer.min.css" />
<script type="text/javascript">
  var oldLoadAp = window.onload;
  window.onload = function () {
    oldLoadAp && oldLoadAp();

    new APlayer({
      container: document.getElementById('aplayer'),
      fixed: true,
      autoplay: 'true' === 'true',
      loop: 'all',
      order: 'random',
      theme: '#4169E1',
      preload: 'none',
      audio: [{"name":"Try","artist":"Marlisa","url":"/mp3/Try.mp3","cover":"/img/musicCover/Marlisa.jpeg"},{"name":"Love The Way You Lie + I need a doctor","artist":"Rihannaã€Eminem","url":"/mp3/Love.mp3","cover":"/img/musicCover/Eminem.jpeg"}]
    });
  }
</script>

  

  

  <footer class="mt-5">
  <div class="text-center py-3">
    <div>
      <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener">
        <span>Fluid</span></a>
    </div>
    
  <div>
    
      <!-- ä¸è’œå­ç»Ÿè®¡PV -->
      
      <span id="busuanzi_container_site_pv" style="display: none">
      æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv"></span> æ¬¡
    </span>
    
    
      <!-- ä¸è’œå­ç»Ÿè®¡UV -->
      
      <span id="busuanzi_container_site_uv" style="display: none">
      æ€»è®¿å®¢æ•° <span id="busuanzi_value_site_uv"></span> äºº
    </span>
    
  </div>


    

    
  </div>
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/main.js" ></script>


  <script  src="/js/lazyload.js" ></script>



  
  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: '.post-content',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 6,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>





  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/js/clipboard-use.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




<!-- Plugins -->


  
    <!-- Baidu Analytics -->
    <script defer>
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?26e6317c907495b6a9e0a92188348969";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  

  

  

  

  



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "é›¶ä»£ç å®ç°å¯¼èˆªæ åˆ‡æ¢å®Œç¾è¿‡æ¸¡&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 100,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      searchFunc(path, 'local-search-input', 'local-search-result');
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>


















</body>
</html>
